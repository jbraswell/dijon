# dijon

## Development

### Makefile targets
```
make lint
make test
make docker
```

### Set up a local database
The easiest way to get a local db is using docker. This will spin up a mariadb db using the default creds.
```
docker run -d \
    --name dijon \
    -e MARIADB_ROOT_PASSWORD=dijon \
    -e MARIADB_DATABASE=dijon \
    -e MARIADB_USER=dijon \
    -e MARIADB_PASSWORD=dijon \
    -p 3306:3306 \
    mariadb
```

To connect to the database with mysql cli
```
docker run -it --rm --network host mariadb mysql --host=0.0.0.0 --user=dijon --password=dijon dijon
```

### Running the API Locally
Browse to http://localhost:8000/docs for some fancy autogenerated API documentation.

```
# Don't forget to run db migrations
poetry run dijon run-migrations
poetry run dijon run-api
```

### Poetry
```
# Install poetry
~/dijon $ pip install poetry

# Initialize venv
~/dijon $ poetry install

# Run our scripts
~/dijon $ poetry run dijon run-migrations
~/dijon $ poetry run dijon run-api

# Add a dependency
~/dijon $ poetry add requests

# Add a dev dependency
~/dijon $ poetry add -D requests

# View path to venv
~/dijon $ poetry env list --full-path
```
